{"version":3,"sources":["../../../node_modules/fab.controller/src/FAB.controller.js","../../../assetsSource/js/controllers/ScriptSets.js","../../../assetsSource/js/main.js","../../../node_modules/fab.grunt-build/src/js/fab.js","../../../node_modules/fab.model/src/FAB.model.js","../../../assetsSource/js/components/sortable.js","../../../assetsSource/js/setup.js"],"names":["runFabController","F","undefined","window","jQuery","setTimeout","constructors","constructed","createConstructor","fn","obj","constructor","optObj","i","ControllerModel","thisObj","this","newObj","$","extend","hasOwnProperty","el","$el","get","HTMLElement","model","validateGuid","guid","make","init","Array","prototype","shift","apply","arguments","events","key","callback","on","split","controller","construct","name","constructedObj","Function","bind","push","runEditScriptSet","W","fabDependenciesLoaded","scriptsCollapsed","click .js-add-script","self","ajax","url","success","html","find","append","click .js-remove-script","e","currentTarget","$script","closest","val","hide","click .js-scripts-collapse-expand","set","Sortable","create","disableXAxis","draggable","handle","animation","onChange","collapseScripts","expandScripts","$scriptBodies","slideUp","each","text","show","slideDown","runMain","FAB","guids","s4","Math","floor","random","toString","substring","createModelConstructor","attrs","initialValues","properties","propertyTypes","changeEvents","prop","parseInt","parseFloat","String","Object","args","changed","oldVal","forEach","noNameSpace","offChange","indexOf","factory","define","amd","module","exports","Package","options","_extend","expando","defaults","group","sort","disabled","store","scroll","scrollSensitivity","scrollSpeed","test","nodeName","ghostClass","chosenClass","ignore","filter","setData","dataTransfer","dragEl","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","forceFallback","fallbackClass","fallbackOnBody","_prepareGroup","charAt","nativeDraggable","supportDraggable","_on","_onTapStart","touchDragOverListeners","_onDragOver","_cloneHide","state","cloneEl","_css","rootEl","insertBefore","_closest","selector","ctx","document","tag","toUpperCase","re","RegExp","join","parentNode","length","className","match","_globalDragOver","evt","dropEffect","preventDefault","event","addEventListener","_off","removeEventListener","_toggleClass","classList","replace","RSPACE","style","defaultView","getComputedStyle","currentStyle","_find","tagName","iterator","list","getElementsByTagName","n","_dispatchEvent","sortable","targetEl","fromEl","startIndex","newIndex","createEvent","onName","substr","initEvent","to","from","item","clone","oldIndex","dispatchEvent","call","_onMove","toEl","dragRect","targetRect","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","getBoundingClientRect","_disableDraggable","_unsilent","_silent","_ghostIsLast","lastEl","lastElementChild","rect","clientY","top","height","clientX","right","width","_generateId","str","src","href","sum","charCodeAt","_index","index","previousElementSibling","_throttle","ms","_this","dst","parentEl","ghostEl","nextEl","scrollEl","scrollParentEl","lastCSS","lastParentCSS","activeGroup","tapEvt","touchEvt","moved","autoScroll","Date","getTime","win","createElement","supportCssPointerEvents","cssText","pointerEvents","abs","_autoScroll","vx","vy","sens","speed","x","y","winWidth","innerWidth","winHeight","innerHeight","offsetWidth","scrollWidth","offsetHeight","scrollHeight","left","bottom","clearInterval","pid","setInterval","scrollTo","pageXOffset","pageYOffset","scrollTop","scrollLeft","groups","put","type","touch","touches","target","originalTarget","button","some","criteria","trim","_prepareDragStart","dragStartFn","ownerDocument","nextSibling","_disableDelayedDrag","_triggerDragStart","_onDrop","_dragStartTimer","clearTimeout","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","active","_emulateDragOver","_lastX","_lastY","elementFromPoint","parent","groupName","_onTouchMove","_appendGhost","dx","dy","translate3d","ghostRect","css","cloneNode","marginTop","marginLeft","body","appendChild","useFallback","_offUpEvents","pull","_loopId","effectAllowed","revert","groupPut","isOwner","canSort","stopPropagation","contains","children","animated","_animate","after","floating","cssFloat","display","isWide","isLong","halfway","nextElementSibling","moveVector","elTop","offsetTop","tgTop","prevRect","currentRect","removeChild","save","handleEvent","toArray","order","getAttribute","items","id","option","value","destroy","querySelectorAll","removeAttribute","splice","utils","off","is","throttle","toggleClass","version","doT"],"mappings":"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","file":"script.min.js","sourcesContent":["/*----------------------------------------------------------------------------*\\\n    # Copyright 2017, BuzzingPixel, LLC\n\n    # This program is free software: you can redistribute it and/or modify\n    # it under the terms of the Apache License 2.0.\n    # http://www.apache.org/licenses/LICENSE-2.0\n\\*----------------------------------------------------------------------------*/\n\n// Make sure FAB is defined\nwindow.FAB = window.FAB || {};\n\n// Set up fab controller\nfunction runFabController(F) {\n    'use strict';\n\n    if (window.jQuery === undefined) {\n        setTimeout(function() {\n            runFabController(F);\n        }, 10);\n        return;\n    }\n\n    var jQuery = window.jQuery;\n\n    // A place to store constructors\n    var constructors = {};\n\n    // A place to store constructed objects\n    var constructed = [];\n\n    /**\n     * Make a controller constructor\n     *\n     * @param {String|Object} fn - Name of constructor or options to return constructor only\n     * @param {Object} obj - Options\n     * @return {constructor}\n     */\n    var createConstructor = function(fn, obj) {\n        // Constructor variable\n        var constructor;\n\n        // Determine type of first argument\n        if (typeof fn === 'object') {\n            obj = fn;\n            fn = null;\n        } else if (typeof fn !== 'string') {\n            obj = {};\n            fn = null;\n        }\n\n        /**\n         * Create a constructor\n         *\n         * @param {Object|boolean|null} optObj\n         */\n        constructor = function(optObj) {\n            // Set a variable for this\n            var thisObj = this;\n\n            // Clone the object\n            var newObj = $.extend(true, {}, obj);\n\n            // Set iterator key\n            var i;\n\n            // Set model var\n            var ControllerModel;\n\n            // Loop through the options and set them\n            for (i in newObj) {\n                if (newObj.hasOwnProperty(i)) {\n                    thisObj[i] = newObj[i];\n                }\n            }\n\n            // Loop through incoming options and set them\n            if (typeof optObj === 'object') {\n                for (i in optObj) {\n                    if (optObj.hasOwnProperty(i)) {\n                        thisObj[i] = optObj[i];\n                    }\n                }\n            }\n\n            // Check if el or $el has been set\n            if (! thisObj.el) {\n                thisObj.$el = $('<div></div>');\n                thisObj.el = thisObj.$el.get(0);\n\n                // If the incoming el is a string, use as selector\n            } else if (typeof thisObj.el === 'string') {\n                thisObj.$el = $(thisObj.el);\n                thisObj.el = thisObj.$el.get(0);\n\n                // Check if the incoming el is a jQuery object\n            } else if (thisObj.el instanceof jQuery) {\n                thisObj.$el = thisObj.el;\n                thisObj.el = thisObj.$el.get(0);\n\n                // Check if the incoming el is a DOM object\n            } else if (thisObj.el instanceof HTMLElement) {\n                thisObj.$el = $(thisObj.el);\n            }\n\n            // Check if model is set\n            if (typeof thisObj.model === 'object' && typeof F.model !== 'undefined') {\n                if (! F.model.validateGuid(thisObj.model.guid)) {\n                    ControllerModel = F.model.make(thisObj.model);\n                    thisObj.model = new ControllerModel();\n                }\n            } else if (this.model !== undefined) {\n                thisObj.model = null;\n            }\n\n            // Check for init\n            if (typeof thisObj.init === 'function') {\n                // Remove the first argument from the arguments\n                Array.prototype.shift.apply(arguments);\n\n                // Run the init function\n                thisObj.init.apply(thisObj, arguments);\n            }\n\n            // Check if there are events\n            if (typeof thisObj.events === 'object') {\n                // Loop through the events\n                for (i in thisObj.events) {\n                    if (\n                        // Make sure the object has own property\n                    thisObj.events.hasOwnProperty(i) &&\n                    // Make sure the value is a callable function\n                    typeof thisObj.events[i] === 'function'\n                    ) {\n                        // Enclose in a function so we have immutable vars\n                        (function(key, callback) {\n                            if (key[1]) {\n                                thisObj.$el.on(key[0], key[1], function() {\n                                    callback.apply(thisObj, arguments);\n                                });\n                            } else {\n                                thisObj.$el.on(key[0], function() {\n                                    callback.apply(thisObj, arguments);\n                                });\n                            }\n                        })(i.split(' '), thisObj.events[i]);\n                    }\n                }\n            }\n        };\n\n        // If a name has been defined for this constructor, add it\n        if (fn) {\n            constructors[fn] = constructor;\n        }\n\n        // Return the constructor\n        return constructor;\n    };\n\n    /**\n     * Controller API\n     */\n    F.controller = {\n        /**\n         * Make a controller constructor\n         * @return {constructor}\n         */\n        make: function() {\n            return createConstructor.apply(createConstructor, arguments);\n        },\n\n        /**\n         * Construct a new object from a constructor\n         *\n         * @param {String} name\n         */\n        construct: function(name) {\n            // Set a variable for the constructed object\n            var constructedObj;\n\n            // Make sure the constructor exists\n            if (typeof constructors[name] !== 'function') {\n                return null;\n            }\n\n            // Run the constructor\n            constructedObj = new (Function.prototype.bind.apply(\n                    constructors[name], arguments)\n            )();\n\n            // Push the constructor into the array of constructed objects\n            constructed.push(constructedObj);\n\n            // Return the constructed object\n            return constructedObj;\n        }\n    };\n}\n\n// Run fab controller set up\nrunFabController(window.FAB);\n","function runEditScriptSet(F, W) {\n    'use strict';\n\n    // Make sure Fabricator has been fully loaded\n    if (! W.fabDependenciesLoaded()) {\n        setTimeout(function() {\n            runEditScriptSet(F, W);\n        }, 10);\n        return;\n    }\n\n    // Create the controller\n    F.controller.make('EditScriptSet', {\n        model: {\n            scriptsCollapsed: 'bool'\n        },\n\n        events: {\n            'click .js-add-script': function() {\n                // Save a reference to the controller\n                var self = this;\n\n                $.ajax({\n                    url: '/servers/scripts/script-template',\n                    success: function(html) {\n                        self.$el.find('.js-scripts-container').append(html);\n                    }\n                });\n            },\n            'click .js-remove-script': function(e) {\n                var $el = $(e.currentTarget);\n                var $script = $el.closest('.js-script');\n                $script.find('.js-script-delete').val('true');\n                $script.hide();\n            },\n            'click .js-scripts-collapse-expand': function(e) {\n                // Save a reference to the controller\n                var self = this;\n\n                // Set model\n                self.model.set(\n                    'scriptsCollapsed',\n                    ! self.model.get('scriptsCollapsed')\n                );\n            }\n        },\n\n        init: function() {\n            // Save a reference to the controller\n            var self = this;\n\n            // Get the scripts container element\n            var el = self.$el.find('.js-scripts-container').get(0);\n\n            // Instantiate sorting\n            window.Sortable.create(el, {\n                disableXAxis: true,\n                draggable: '.js-script',\n                handle: '.js-script-sort-handle',\n                animation: 150\n            });\n\n            // Watch for scripts collapsed model changes\n            self.model.onChange('scriptsCollapsed', function(val) {\n                if (val) {\n                    self.collapseScripts();\n                    return;\n                }\n                self.expandScripts();\n            });\n        },\n\n        collapseScripts: function() {\n            // Save a reference to the controller\n            var self = this;\n\n            // Get the script bodies\n            var $scriptBodies = self.$el.find('.js-script-body');\n\n            // Collapse scripts\n            $scriptBodies.slideUp(100);\n\n            // Iterate through script bodies and set title\n            $scriptBodies.each(function() {\n                var $el = $(this);\n                var $script = $el.closest('.js-script');\n                $script.find('.js-script-name-holder').text(\n                    ': ' + $script.find('.js-script-name').val()\n                );\n            });\n\n            // Hide the collapse option\n            self.$el.find('.js-collapse-scripts').hide();\n\n            // Show the expand scripts option\n            self.$el.find('.js-expand-scripts').show();\n        },\n\n        expandScripts: function() {\n            // Save a reference to the controller\n            var self = this;\n\n            // Get the script bodies\n            var $scriptBodies = self.$el.find('.js-script-body');\n\n            // Expand scripts\n            $scriptBodies.slideDown(100);\n\n            // Iterate through script bodies and unset title\n            $scriptBodies.each(function() {\n                var $el = $(this);\n                var $script = $el.closest('.js-script');\n                $script.find('.js-script-name-holder').text('');\n            });\n\n            // Show the collapse option\n            self.$el.find('.js-collapse-scripts').show();\n\n            // Hide the expand scripts option\n            self.$el.find('.js-expand-scripts').hide();\n        }\n    });\n}\n\nrunEditScriptSet(window.FAB, window);\n","// This file is run after everything else\n\nfunction runMain(F, W) {\n    'use strict';\n\n    // Make sure Fabricator has been fully loaded\n    if (! W.fabDependenciesLoaded()) {\n        setTimeout(function() {\n            runMain(F, W);\n        }, 10);\n        return;\n    }\n\n    // Run script sets on page\n    $('.js-edit-script-set').each(function() {\n        F.controller.construct('EditScriptSet', {\n            el: this\n        });\n    });\n}\n\nrunMain(window.FAB, window);\n","/*----------------------------------------------------------------------------*\\\n    # Copyright 2017, BuzzingPixel, LLC\n\n    # This program is free software: you can redistribute it and/or modify\n    # it under the terms of the Apache License 2.0.\n    # http://www.apache.org/licenses/LICENSE-2.0\n\\*----------------------------------------------------------------------------*/\n\n// Make sure FAB is defined\nwindow.FAB = window.FAB || {};\n","/*----------------------------------------------------------------------------*\\\n    # Copyright 2017, BuzzingPixel, LLC\n\n    # This program is free software: you can redistribute it and/or modify\n    # it under the terms of the Apache License 2.0.\n    # http://www.apache.org/licenses/LICENSE-2.0\n\\*----------------------------------------------------------------------------*/\n\n// Make sure FAB is defined\nwindow.FAB = window.FAB || {};\n\n(function(F) {\n    'use strict';\n\n    // A place to store GUIDs\n    var guids = [];\n\n    // Create GUID\n    var guid = function() {\n        var s4 = function() {\n            return Math.floor((1 + Math.random()) * 0x10000)\n                .toString(16)\n                .substring(1);\n        };\n\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n            s4() + '-' + s4() + s4() + s4();\n    };\n\n    /**\n     * Make a model constructor\n     *\n     * @param {Object} attrs\n     */\n    var createModelConstructor = function(attrs) {\n        // Set a variable for the constructor\n        var constructor;\n\n        // Make sure attrs is an object\n        if (typeof attrs !== 'object') {\n            attrs = {};\n        }\n\n        // Define the constructor\n        constructor = function(initialValues) {\n            // Set a local variable for this\n            var thisObj = this;\n\n            // Set GUID\n            thisObj.guid = guid();\n\n            // Push the GUID\n            guids.push(thisObj.guid);\n\n            // Set up properties\n            thisObj.properties = {};\n\n            // Set up property types\n            thisObj.propertyTypes = attrs;\n\n            // Set up change events\n            thisObj.changeEvents = {};\n\n            // Loop through property types and set change events objects\n            for (var prop in thisObj.propertyTypes) {\n                if (thisObj.propertyTypes.hasOwnProperty(prop)) {\n                    thisObj.changeEvents[prop] = {};\n                }\n            }\n\n            // Set any initial values\n            for (var i in initialValues) {\n                if (initialValues.hasOwnProperty(i)) {\n                    if (thisObj.propertyTypes[i] !== undefined) {\n                        thisObj.properties[i] = initialValues[i];\n                    }\n                }\n            }\n        };\n\n        // Set prototype methods\n        constructor.prototype = {\n            get: function(name) {\n                var model = this;\n\n                if (model.properties[name]) {\n                    if (model.propertyTypes[name] === 'int') {\n                        return parseInt(model.properties[name]);\n                    } else if (model.propertyTypes[name] === 'float') {\n                        return parseFloat(model.properties[name]);\n                    } else if (model.propertyTypes[name] === 'string') {\n                        return String(model.properties[name]);\n                    } else if (model.propertyTypes[name] === 'bool') {\n                        return model.properties[name] === true;\n                    } else if (model.propertyTypes[name] === 'array') {\n                        if (model.properties[name].constructor === Array) {\n                            return model.properties[name];\n                        } else {\n                            return [];\n                        }\n                    } else if (model.propertyTypes[name] === 'object') {\n                        if (model.properties[name].constructor === Object) {\n                            return model.properties[name];\n                        } else {\n                            return {};\n                        }\n                    } else {\n                        return null;\n                    }\n                } else {\n                    if (\n                        model.propertyTypes[name] === 'int' ||\n                        model.propertyTypes[name] === 'float'\n                    ) {\n                        return 0;\n                    } else if (model.propertyTypes[name] === 'string') {\n                        return '';\n                    } else if (model.propertyTypes[name] === 'bool') {\n                        return false;\n                    } else if (model.propertyTypes[name] === 'array') {\n                        return [];\n                    } else if (model.propertyTypes[name] === 'object') {\n                        return {};\n                    } else {\n                        return null;\n                    }\n                }\n            },\n            set: function(name, val) {\n                var model = this;\n                var changed = false;\n                var oldVal = model.properties[name];\n                var args;\n\n                if (model.propertyTypes[name] === 'int') {\n                    model.properties[name] = parseInt(val);\n                    changed = true;\n                } else if (model.propertyTypes[name] === 'float') {\n                    model.properties[name] = parseFloat(val);\n                    changed = true;\n                } else if (model.propertyTypes[name] === 'string') {\n                    model.properties[name] = String(val);\n                    changed = true;\n                } else if (model.propertyTypes[name] === 'bool') {\n                    model.properties[name] = val === true || val === 'true' || val === 'yes' || val === 'y';\n                    changed = true;\n                } else if (model.propertyTypes[name] === 'array') {\n                    if (val.constructor === Array) {\n                        model.properties[name] = val;\n                        changed = true;\n                    }\n                } else if (model.propertyTypes[name] === 'object') {\n                    if (val.constructor === Object) {\n                        model.properties[name] = val;\n                        changed = true;\n                    }\n                }\n\n                if (! changed || oldVal === model.properties[name] || model.changeEvents[name] === undefined) {\n                    return;\n                }\n\n                args = [\n                    model.properties[name],\n                    oldVal\n                ];\n\n                for (var i in model.changeEvents[name]) {\n                    model.changeEvents[name][i].forEach(function(callback) {\n                        callback.apply(callback, args);\n                    });\n                }\n            },\n            onChange: function(name, callback) {\n                var model = this;\n                var key = name.split('.');\n\n                if (model.propertyTypes[key[0]] !== undefined) {\n                    if (key[1] === undefined) {\n                        if (model.changeEvents[key[0]].noNameSpace === undefined) {\n                            model.changeEvents[key[0]].noNameSpace = [];\n                        }\n\n                        model.changeEvents[key[0]].noNameSpace.push(callback);\n                    } else {\n                        if (model.changeEvents[key[0]][key[1]] === undefined) {\n                            model.changeEvents[key[0]][key[1]] = [];\n                        }\n\n                        model.changeEvents[key[0]][key[1]].push(callback);\n                    }\n                }\n            },\n            offChange: function(name) {\n                var model = this;\n                var key = name.split('.');\n\n                if (key[1] === undefined) {\n                    model.changeEvents[key[0]] = {};\n                } else {\n                    delete model.changeEvents[key[0]][key[1]];\n                }\n            }\n        };\n\n        // Return the constructor\n        return constructor;\n    };\n\n    /**\n     * Model API\n     */\n    F.model = {\n        /**\n         * Make a model constructor\n         */\n        make: function() {\n            return createModelConstructor.apply(\n                createModelConstructor,\n                arguments\n            );\n        },\n\n        /**\n         * Validate GUID\n         *\n         * @param {String} guid\n         */\n        validateGuid: function(guid) {\n            return guids.indexOf(guid) > -1;\n        }\n    };\n})(window.FAB);\n","/* jshint ignore:start */\n// jscs:disable\n\n/**!\n * Sortable https://github.com/RubaXa/Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n\n(function (factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse if (typeof Package !== \"undefined\") {\n\t\tSortable = factory();  // export for Meteor.js\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function () {\n\t\"use strict\";\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\n\t\tlastEl,\n\t\tlastCSS,\n\t\tlastParentCSS,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tautoScroll = {},\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\t\t/** @const */\n\t\tRSPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\n\t\tsupportDraggable = !!('draggable' in document.createElement('div')),\n\t\tsupportCssPointerEvents = (function (el) {\n\t\t\tel = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\n\t\tabs = Math.abs,\n\t\tslice = [].slice,\n\n\t\ttouchDragOverListeners = [],\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (rootEl && options.scroll) {\n\t\t\t\tvar el,\n\t\t\t\t\trect,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy\n\t\t\t\t\t;\n\n\t\t\t\t// Delect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollParentEl = rootEl;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = rootEl;\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n\t\t\t\t\t\t\t\t(scrollEl.offsetHeight < scrollEl.scrollHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\t\t} while (scrollEl = scrollEl.parentNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scrollEl) {\n\t\t\t\t\tel = scrollEl;\n\t\t\t\t\trect = scrollEl.getBoundingClientRect();\n\t\t\t\t\tvx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n\t\t\t\t\tvy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n\t\t\t\t}\n\n\n\t\t\t\tif (!(vx || vy)) {\n\t\t\t\t\tvx = (winWidth - x <= sens) - (x <= sens);\n\t\t\t\t\tvy = (winHeight - y <= sens) - (y <= sens);\n\n\t\t\t\t\t/* jshint expr:true */\n\t\t\t\t\t(vx || vy) && (el = win);\n\t\t\t\t}\n\n\n\t\t\t\tif (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n\t\t\t\t\tautoScroll.el = el;\n\t\t\t\t\tautoScroll.vx = vx;\n\t\t\t\t\tautoScroll.vy = vy;\n\n\t\t\t\t\tclearInterval(autoScroll.pid);\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tautoScroll.pid = setInterval(function () {\n\t\t\t\t\t\t\tif (el === win) {\n\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + vx * speed, win.pageYOffset + vy * speed);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvy && (el.scrollTop += vy * speed);\n\t\t\t\t\t\t\t\tvx && (el.scrollLeft += vx * speed);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 30),\n\n\t\t_prepareGroup = function (options) {\n\t\t\tvar group = options.group;\n\n\t\t\tif (!group || typeof group != 'object') {\n\t\t\t\tgroup = options.group = {name: group};\n\t\t\t}\n\n\t\t\t['pull', 'put'].forEach(function (key) {\n\t\t\t\tif (!(key in group)) {\n\t\t\t\t\tgroup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\toptions.groups = ' ' + group.name + (group.put.join ? ' ' + group.put.join(' ') : '') + ' ';\n\t\t}\n\t\t;\n\n\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: Math.random(),\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tanimation: 0,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\n\t\t\t// Custom addition by TJ\n\t\t\tdisableXAxis: false\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t_on(el, 'touchstart', this._onTapStart);\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\ttouchDragOverListeners.push(this._onDragOver);\n\n\t\t// Restore sorting\n\t\toptions.store && this.sort(options.store.get(this));\n\t}\n\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = target,\n\t\t\t\tfilter = options.filter;\n\n\n\t\t\tif (type === 'mousedown' && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button or enabled\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el);\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// get the index of the dragged element within its parent\n\t\t\toldIndex = _index(target);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, oldIndex);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, oldIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target);\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\ttapEvt = evt;\n\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tactiveGroup = options.group;\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = true;\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, _this.options.chosenClass, true);\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(touch);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Touch */touch) {\n\t\t\tif (touch) {\n\t\t\t\t// Touch device support\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: touch.clientX,\n\t\t\t\t\tclientY: touch.clientY\n\t\t\t\t};\n\n\t\t\t\tthis._onDragStart(tapEvt, 'touch');\n\t\t\t}\n\t\t\telse if (!this.nativeDraggable) {\n\t\t\t\tthis._onDragStart(tapEvt, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function () {\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\t// Apply effect\n\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, true);\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function () {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t\t}\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n\t\t\t\t\tparent = target,\n\t\t\t\t\tgroupName = ' ' + this.options.group.name + '',\n\t\t\t\t\ti = touchDragOverListeners.length;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando] && parent[expando].options.groups.indexOf(groupName) > -1) {\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\ttouchDragOverListeners[i]({\n\t\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active) {\n\t\t\t\t\tthis._dragStarted();\n\t\t\t\t}\n\n\t\t\t\t// as well as creating the ghost element on the document body\n\t\t\t\tthis._appendGhost();\n\n\t\t\t\tvar touch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tdx = this.options.disableXAxis ? 0 : touch.clientX - tapEvt.clientX, // Ternary custom addition by TJ\n\t\t\t\t\tdy = touch.clientY - tapEvt.clientY,\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = dragEl.getBoundingClientRect(),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\tghostRect;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, this.options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, this.options.fallbackClass, true);\n\n\t\t\t\t_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\t\t\t\t_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\tthis.options.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n\t\t\t\t// Fixing dimensions.\n\t\t\t\tghostRect = ghostEl.getBoundingClientRect();\n\t\t\t\t_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n\t\t\tvar dataTransfer = evt.dataTransfer,\n\t\t\t\toptions = this.options;\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (activeGroup.pull == 'clone') {\n\t\t\t\tcloneEl = dragEl.cloneNode(true);\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t}\n\n\t\t\tif (useFallback) {\n\n\t\t\t\tif (useFallback === 'touch') {\n\t\t\t\t\t// Bind touch events\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'touchend', this._onDrop);\n\t\t\t\t\t_on(document, 'touchcancel', this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t// Old brwoser\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'mouseup', this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tthis._loopId = setInterval(this._emulateDragOver, 50);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', this);\n\t\t\t\tsetTimeout(this._dragStarted, 0);\n\t\t\t}\n\t\t},\n\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget,\n\t\t\t\tdragRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tgroupPut = group.put,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort;\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation();\n\t\t\t}\n\n\t\t\tmoved = true;\n\n\t\t\tif (activeGroup && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t\t: activeGroup.pull && groupPut && (\n\t\t\t\t\t\t(activeGroup.name === group.name) || // by Name\n\t\t\t\t\t\t(groupPut.indexOf && ~groupPut.indexOf(activeGroup.name)) // by Array\n\t\t\t\t\t)\n\t\t\t\t) &&\n\t\t\t\t(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n\t\t\t) {\n\t\t\t\t// Smart auto-scrolling\n\t\t\t\t_autoScroll(evt, options, this.el);\n\n\t\t\t\tif (_silent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttarget = _closest(evt.target, options.draggable, el);\n\t\t\t\tdragRect = dragEl.getBoundingClientRect();\n\n\t\t\t\tif (revert) {\n\t\t\t\t\t_cloneHide(true);\n\n\t\t\t\t\tif (cloneEl || nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, cloneEl || nextEl);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!canSort) {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t(el === evt.target) && (target = _ghostIsLast(el, evt))\n\t\t\t\t) {\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tif (target.animated) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\t_cloneHide(isOwner);\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect) !== false) {\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n\t\t\t\t\tif (lastEl !== target) {\n\t\t\t\t\t\tlastEl = target;\n\t\t\t\t\t\tlastCSS = _css(target);\n\t\t\t\t\t\tlastParentCSS = _css(target.parentNode);\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar targetRect = target.getBoundingClientRect(),\n\t\t\t\t\t\twidth = targetRect.right - targetRect.left,\n\t\t\t\t\t\theight = targetRect.bottom - targetRect.top,\n\t\t\t\t\t\tfloating = /left|right|inline/.test(lastCSS.cssFloat + lastCSS.display)\n\t\t\t\t\t\t\t|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n\t\t\t\t\t\tisWide = (target.offsetWidth > dragEl.offsetWidth),\n\t\t\t\t\t\tisLong = (target.offsetHeight > dragEl.offsetHeight),\n\t\t\t\t\t\thalfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n\t\t\t\t\t\tnextSibling = target.nextElementSibling,\n\t\t\t\t\t\tmoveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect),\n\t\t\t\t\t\tafter\n\t\t\t\t\t\t;\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\t_cloneHide(isOwner);\n\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (floating) {\n\t\t\t\t\t\t\tvar elTop = dragEl.offsetTop,\n\t\t\t\t\t\t\t\ttgTop = target.offsetTop;\n\n\t\t\t\t\t\t\tif (elTop === tgTop) {\n\t\t\t\t\t\t\t\tafter = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tafter = tgTop > elTop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\tthis._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = target.getBoundingClientRect();\n\n\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t+ (prevRect.left - currentRect.left) + 'px,'\n\t\t\t\t\t+ (prevRect.top - currentRect.top) + 'px,0)'\n\t\t\t\t);\n\n\t\t\t\ttarget.offsetWidth; // repaint\n\n\t\t\t\t_css(target, 'transition', 'all ' + ms + 'ms');\n\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\n\t\t\t\tclearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\n\t\t\tclearInterval(this._loopId);\n\t\t\tclearInterval(autoScroll.pid);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Remove clone\n\t\t\t\t\t\tcloneEl && cloneEl.parentNode.removeChild(cloneEl);\n\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\tif (newIndex === null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Nulling\n\t\t\t\trootEl =\n\t\t\t\t\tdragEl =\n\t\t\t\t\t\tparentEl =\n\t\t\t\t\t\t\tghostEl =\n\t\t\t\t\t\t\t\tnextEl =\n\t\t\t\t\t\t\t\t\tcloneEl =\n\n\t\t\t\t\t\t\t\t\t\tscrollEl =\n\t\t\t\t\t\t\t\t\t\t\tscrollParentEl =\n\n\t\t\t\t\t\t\t\t\t\t\t\ttapEvt =\n\t\t\t\t\t\t\t\t\t\t\t\t\ttouchEvt =\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmoved =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewIndex =\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastEl =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastCSS =\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveGroup =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSortable.active = null;\n\t\t\t}\n\t\t},\n\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tvar type = evt.type;\n\n\t\t\tif (type === 'dragover' || type === 'dragenter') {\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'drop' || type === 'dragend') {\n\t\t\t\tthis._onDrop(evt);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\ttouchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n\t\t\tthis._onDrop();\n\n\t\t\tthis.el = el = null;\n\t\t}\n\t};\n\n\n\tfunction _cloneHide(state) {\n\t\tif (cloneEl && (cloneEl.state !== state)) {\n\t\t\t_css(cloneEl, 'display', state ? 'none' : '');\n\t\t\t!state && cloneEl.state && rootEl.insertBefore(cloneEl, dragEl);\n\t\t\tcloneEl.state = state;\n\t\t}\n\t}\n\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\t\t\tselector = selector.split('.');\n\n\t\t\tvar tag = selector.shift().toUpperCase(),\n\t\t\t\tre = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\t(tag === '>*' && el.parentNode === ctx) || (\n\t\t\t\t\t\t(tag === '' || el.nodeName.toUpperCase() == tag) &&\n\t\t\t\t\t\t(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (el !== ctx && (el = el.parentNode));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, false);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, false);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(RSPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(RSPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style)) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n\t\tvar evt = document.createEvent('Event'),\n\t\t\toptions = (sortable || rootEl[expando]).options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n\t\tevt.initEvent(name, true, true);\n\n\t\tevt.to = rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\trootEl.dispatchEvent(evt);\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\n\t\tevt = document.createEvent('Event');\n\t\tevt.initEvent('move', true, true);\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\n\t/** @returns {HTMLElement|false} */\n\tfunction _ghostIsLast(el, evt) {\n\t\tvar lastEl = el.lastElementChild,\n\t\t\trect = lastEl.getBoundingClientRect();\n\n\t\treturn ((evt.clientY - (rect.top + rect.height) > 5) || (evt.clientX - (rect.right + rect.width) > 5)) && lastEl; // min delta\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent\n\t * @param  {HTMLElement} el\n\t * @return {number}\n\t */\n\tfunction _index(el) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif (el.nodeName.toUpperCase() !== 'TEMPLATE') {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _throttle(callback, ms) {\n\t\tvar args, _this;\n\n\t\treturn function () {\n\t\t\tif (args === void 0) {\n\t\t\t\targs = arguments;\n\t\t\t\t_this = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\targs = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tindex: _index\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.3.0-rc2';\n\treturn Sortable;\n});\n/* jshint ignore:end */\n","// Anything in this file will be run before the rest of your custom files\n\nwindow.fabDependenciesLoaded = function() {\n    'use strict';\n\n    return window.FAB.controller !== undefined &&\n        window.$ !== undefined &&\n        window.doT !== undefined &&\n        window.Sortable !== undefined;\n};\n"]}